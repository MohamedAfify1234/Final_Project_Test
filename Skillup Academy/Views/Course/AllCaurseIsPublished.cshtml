@model IEnumerable<Course>

@{
    ViewData["Title"] = "Explore Courses";
     var baseImageUrl = "/uploads/thumbnails/";
}
<div class="container">

	<div class="row align-items-center mb-5 mt-3">
		<div class="col-md-9">
			<h1 class="display-4 text-primary fw-bold">Explore Our Courses</h1>
			<p class="lead text-muted">Find the perfect course to start your learning journey today.</p>
		</div>
		<div class="col-md-3 text-end">
			@* Optional: Add search or filter functionality here for a complete catalog experience *@
			<button class="btn btn-outline-secondary" type="button"><i class="bi bi-funnel me-1"></i> Filter</button>
		</div>
	</div>

	<div class="row">
		@if (Model.Any())
		{
			@foreach (var item in Model)
			{
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="card h-100 shadow-lg border-0 rounded-3 course-card-student">

						@* --- 1. Image and Status Badges --- *@
						<div class="position-relative overflow-hidden">
							@{
								// Corrected Image Source Logic
								var imageUrl = string.IsNullOrEmpty(item.ThumbnailUrl) ? "/img/default-course.jpg" : item.ThumbnailUrl;
							}
							<img src="/img/@imageUrl"
								 class="card-img-top"
								 alt="@item.Title"
								 style="height: 200px; object-fit: cover;">

							<div class="position-absolute bottom-0 start-0 m-2">
								@if (item.IsFree)
								{
									<span class="badge rounded-pill bg-success fw-bold p-2"><i class="bi bi-wallet-fill me-1"></i> FREE</span>
								}
								else
								{
									<span class="badge rounded-pill bg-dark fw-bold p-2">PAID</span>
								}
							</div>
						</div>

						<div class="card-body d-flex flex-column">

							@* --- 2. Title and Short Description --- *@
							<h5 class="card-title text-dark fw-bold mb-1">@Html.DisplayFor(modelItem => item.Title)</h5>
							<p class="text-muted small mb-3 flex-grow-1">@Html.DisplayFor(modelItem => item.ShortDescription)</p>

							@* --- 3. Prominent Metrics Row --- *@
							<div class="d-flex justify-content-between small text-muted mb-3 border-top pt-3">
								<div>
									<i class="bi bi-star-fill text-warning me-1"></i>
									<span class="fw-bold text-dark">@item.AverageRating.ToString("F1")</span> (@item.TotalEnrollments)
								</div>
								<div>
									<i class="bi bi-journal-text me-1"></i> @item.TotalLessons Lessons
								</div>
							</div>

							@* --- 4. Call to Action (Enrollment/Details) --- *@
							<div class="mt-auto d-grid">
								@* Action will be "Details" or "Enroll" depending on your actual controller action *@
								<a asp-action="Details" asp-route-id="@item.Id" class="btn btn-primary btn-lg shadow-sm">
									<i class="bi bi-arrow-right-circle me-2"></i> View Course
								</a>
							</div>
						</div>
					</div>
				</div>
			}
		}
		else
		{
			<div class="col-12">
				<div class="alert alert-warning border-0 shadow-sm text-center p-4" role="alert">
					<i class="bi bi-exclamation-triangle-fill me-2"></i> Sorry, no active courses are available right now.
				</div>
			</div>
		}
	</div>

</div>
@section Scripts {
    @* Add custom CSS for the student card hover effect *@
    <style>
        .course-card-student {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

            .course-card-student:hover {
                transform: translateY(-5px);
                box-shadow: 0 1rem 3rem rgba(0,0,0,.1) !important;
            }
    </style>
}